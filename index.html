<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Hello World Homepage" />
    <meta property="og:description" content="A beautiful, animated personal homepage with weather, clouds, and more." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://homepage-gold-iota.vercel.app/" />
    <meta property="og:image" content="https://homepage-gold-iota.vercel.app/randroid-chrome-512x512.png" />
    <meta property="og:site_name" content="Hello World Homepage" />
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <div class="clouds-bg">
        <img src="clouds.png" class="cloud cloud1" alt="cloud">
        <img src="clouds.png" class="cloud cloud2" alt="cloud">
        <img src="clouds.png" class="cloud cloud3" alt="cloud">
    </div>

        <h1>Hello World!</h1>
        

            <img src="profile-square.jpg" alt="Profile Photo" class="photo">
        </div>
        
        <!-- Weather Widget Container -->

            <div class="weather-header">
                <h3>Current Weather</h3>
                <div class="location" id="location">Loading location...</div>
            </div>
            
            <div class="weather-content">
                <div class="temperature-section">
                    <div class="temperature" id="temperature">--¬∞</div>
                    <div class="weather-icon" id="weather-icon">‚òÄÔ∏è</div>
                </div>
                
                <div class="weather-details">
                    <div class="detail-item">
                        <span class="label">Condition:</span>
                        <span class="value" id="condition">--</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Wind:</span>
                        <span class="value" id="wind">-- mph</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Updated:</span>
                        <span class="value" id="updated">--</span>
                    </div>
                </div>
            </div>
            
            <div class="weather-error" id="weather-error" style="display: none;">
                Unable to load weather data. Please try again later.
            </div>
        </div>
        
        <button class="contact-button" onclick="alert('Contact functionality coming soon!')">
            Contact Me
        </button>
    </div>

<script>
// Weather code mapping for Open-Meteo
const weatherCodes = {
    0: { description: 'Clear sky', icon: '‚òÄÔ∏è' },
    1: { description: 'Mainly clear', icon: 'üå§Ô∏è' },
    2: { description: 'Partly cloudy', icon: '‚õÖ' },
    3: { description: 'Overcast', icon: '‚òÅÔ∏è' },
    45: { description: 'Fog', icon: 'üå´Ô∏è' },
    48: { description: 'Depositing rime fog', icon: 'üå´Ô∏è' },
    51: { description: 'Light drizzle', icon: 'üå¶Ô∏è' },
    53: { description: 'Moderate drizzle', icon: 'üå¶Ô∏è' },
    55: { description: 'Dense drizzle', icon: 'üåßÔ∏è' },
    61: { description: 'Slight rain', icon: 'üåßÔ∏è' },
    63: { description: 'Moderate rain', icon: 'üåßÔ∏è' },
    65: { description: 'Heavy rain', icon: 'üåßÔ∏è' },
    71: { description: 'Slight snow', icon: 'üå®Ô∏è' },
    73: { description: 'Moderate snow', icon: '‚ùÑÔ∏è' },
    75: { description: 'Heavy snow', icon: '‚ùÑÔ∏è' },
    95: { description: 'Thunderstorm', icon: '‚õàÔ∏è' }
};

// Default weather info for fallback
const defaultWeather = {
    description: 'Unknown',
    icon: 'üå°Ô∏è'
};

// Get user's location
function getUserLocation() {
    return new Promise((resolve, reject) => {
        if (!navigator.geolocation) {
            reject('Geolocation not supported');
            return;
        }
        
        navigator.geolocation.getCurrentPosition(
            (position) => {
                resolve({
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude
                });
            },
            (error) => {
                console.log('Location access denied, using default location');
                // Fallback to New York coordinates
                resolve({
                    latitude: 40.7128,
                    longitude: -74.0060
                });
            }
        );
    });
}

// Reverse geocoding to get city name (simplified)
async function getCityName(lat, lon) {
    try {
        // Using a simple reverse geocoding service
        const response = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`);
        const data = await response.json();
        return data.city || data.locality || 'Unknown Location';
    } catch (error) {
        console.error('Error getting city name:', error);
        return 'Unknown Location';
    }
}

// Fetch weather data from Open-Meteo
async function fetchWeatherData(latitude, longitude) {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&hourly=relativehumidity_2m&timezone=auto`;
    
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error fetching weather data:', error);
        throw error;
    }
}

// Update the weather widget with data
function updateWeatherWidget(weatherData, cityName) {
    const current = weatherData.current_weather;
    const weatherInfo = weatherCodes[current.weathercode] || defaultWeather;
    
    // Update DOM elements
    document.getElementById('location').textContent = cityName;
    document.getElementById('temperature').textContent = `${Math.round(current.temperature)}¬∞C`;
    document.getElementById('weather-icon').textContent = weatherInfo.icon;
    document.getElementById('condition').textContent = weatherInfo.description;
    document.getElementById('wind').textContent = `${Math.round(current.windspeed)} km/h`;
    
    // Format update time
    const updateTime = new Date(current.time).toLocaleTimeString('en-US', {
        hour: '2-digit',
        minute: '2-digit'
    });
    document.getElementById('updated').textContent = updateTime;
}

// Show error state
function showError() {
    document.querySelector('.weather-content').style.display = 'none';
    document.getElementById('weather-error').style.display = 'block';
}

// Hide error state
function hideError() {
    document.querySelector('.weather-content').style.display = 'block';
    document.getElementById('weather-error').style.display = 'none';
}

// Main function to initialize weather widget
async function initWeatherWidget() {
    try {
        hideError();
        
        // Get user location
        const location = await getUserLocation();
        console.log('Location obtained:', location);
        
        // Get city name
        const cityName = await getCityName(location.latitude, location.longitude);
        console.log('City name:', cityName);
        
        // Fetch weather data
        const weatherData = await fetchWeatherData(location.latitude, location.longitude);
        console.log('Weather data:', weatherData);
        
        // Update widget
        updateWeatherWidget(weatherData, cityName);
        
    } catch (error) {
        console.error('Error initializing weather widget:', error);
        showError();
    }
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', initWeatherWidget);

// Optional: Refresh weather data every 10 minutes
setInterval(initWeatherWidget, 10 * 60 * 1000);
</script>
</body>
</html>
